 <script>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("cadastra");

        form.addEventListener("submit", async (event) => {
          event.preventDefault();
          const email = document.getElementById("email").value;
          const nome = document.getElementById("nome").value;
          const cpf = document.getElementById("cpf").value;
          const telefone = document.getElementById("telefone").value;
          const senha = document.getElementById("senha").value;
          const senha2 = document.getElementById("senha1").value;

          if (senha != senha2) {
            alert("Senha não conferem!");
            throw Error("Senhas não conferem");
          }

          console.log(senha);

          const apiUrl = "http://127.0.0.1:5000/api/funcionarios";
          console.log(email);
          console.log(senha);
          const response = await fetch(apiUrl, {
            method: "POST",
            headers: {
              Accept: "application/json",
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              email: email,
              nome: nome,
              telefone: telefone,
              cpf: cpf,
              password: senha
            })
          });

          const data = await response.json();

          if (response.ok) {
            alert("Usuário criado com sucesso");
          }

          console.log(data);
        });
      });
    </script>











     <div id="funcionariosContent" style="display: none">
                <form class="row p-0" id="cadastra">
                  <div class="input-floating-label mb-4 col">
                    <input type="text" class="form-control" id="nome" placeholder="Username" required="">
                  </div>

                  <div class="input-floating-label mb-4 col">
                    <input type="text" class="form-control" id="cpf" placeholder="Enter " required="">
                  </div>

                  <!-- Email -->
                  <div class="input-floating-label mb-4">
                    <input type="email" class="form-control" id="email" placeholder="Enter Email address" data-gtm-form-interact-field-id="0" required="">
                  </div>

                  <div class="input-floating-label mb-4 col">
                    <input type="date" id="nascimento" class="form-control" name="birthdate" required="">
                  </div>

                  <div class="input-floating-label mb-4 col">
                    <input type="tel" class="form-control" id="telefone" placeholder="Enter " required="">
                  </div>

                  <!-- Password -->
                  <div class="input-floating-label">
                    <input type="password" class="form-control" id="senha" placeholder="Senha" required="">
                  </div>
                  <!-- Pswmeter -->
                  <div id="pswmeter" class="mt-3 password-strength-meter">
                    <div class="password-strength-meter-score"></div>
                  </div>
                  <div class="d-flex mt-1 mb-4">
                    <div id="pswmeter-message" class="rounded">
                      Digite sua senha novamente...
                    </div>
                    <!-- Password message notification -->
                    <div class="ms-auto">
                      <i class="bi bi-info-circle ps-1" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="Include at least one uppercase, one lowercase, one special character, one number and 8 characters long." data-bs-original-title="" title=""></i>
                    </div>
                  </div>

                  <!-- Confirm Password -->
                  <div class="input-floating-label mb-4">
                    <input type="password" class="form-control" id="senha1" placeholder="Confirm your password" required="">
                  </div>

                  <!-- Check box -->
                  <div class="mb-4">
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" id="checkbox-1">
                      <label class="form-check-label" for="checkbox-1">Concordo de condições de termo &amp; política e
                        privacidade</label>
                    </div>
                  </div>
                  <!-- Button -->
                  <div class="align-items-center mt-0">
                    <div class="d-grid">
                      <button class="btn btn-outline-success mb-0" type="submit">
                        Criar sua conta
                      </button>
                    </div>
                  </div>
                </form>
              </div>











              router.post('/ingresso/:pedido_id/:cliente_id' , async(req, res) => {
  try{
      const pedidoId = Number(req.params.pedido_id);
      const clienteId = Number(req.params.cliente_id);

      const pedido = await prisma.pedido.findUniqueOrThrow({
          where: {
              id: pedidoId
          }
      });
      const cliente = await prisma.cliente.findUniqueOrThrow({
          where: {
              id: clienteId
          }
      });

  const pedidoIngresso = await prisma.pedido.create({
      data: {
          pedidoId: pedido.id,
          clienteId: cliente.id
      }
  });
  res.status(201).json(aluguelFilme);
  

} catch(exception){
  exceptionHandler(exception, res);
}


}  )




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deletar Usuário</title>
</head>
<body>
    <h1>Deletar Usuário</h1>
    <input type="number" id="userId" placeholder="Digite o ID do usuário">
    <button onclick="deleteUser()">Deletar Usuário</button>

    <p id="response"></p>

    <script>
        async function deleteUser() {
            const userId = document.getElementById('userId').value;
            const response = await fetch(`http://localhost:3000/users/${userId}`, {
                method: 'DELETE'
            });

            const result = await response.json();
            document.getElementById('response').innerText = result.message;
        }
    </script>
</body>
</html>


app.use(bodyParser.json());

app.post('/api/ingressos', async (req, res) => {
  try {
    const { ingresso_disponivel, preco } = req.body;

    if (!ingresso_disponivel || !preco) {
      return res.status(400).json({ error: "Código de barras e preço são obrigatórios" });
    }

    const novoIngresso = await prisma.ingresso.create({
      data: {
        ingresso_disponivel,
        preco
      }
    });

    res.json(novoIngresso);
  } catch (exception) {
    console.error(exception);
    res.status(500).json({ error: "Erro ao criar ingresso" });
  }
})




var express = require('express');
var router = express.Router();

const {PrismaClient} = require ('@prisma/client');


const prisma = new PrismaClient({errorFormat: "minimal"});

const {exceptionHandler} = require('../utils/ajuda');


/* GET users listing. */
router.get('/', async (req, res) => {
  try {
    const ingressos = await prisma.ingresso.findMany();
    res.json(ingressos);
  } catch (exception) {
    console.error(exception);
    res.status(500).json({ error: 'Erro ao obter ingressos' });
  }
});

router.post('/' , async (req, res) => {
  const data = req.body;

  try{
    const ingresso = await prisma.ingresso.create({
      data: data,
    });
    res.status(201).json(ingresso);
  
  }
  catch(exception){
    exceptionHandler(exception, res);


  }

});



/* get / api/users/{id} - obtem usuario por id */
router.get('/:id', async (req, res) => {
  try {
    const id = Number(req.params.id);
    const ingresso = await prisma.ingresso.findUniqueOrThrow({
      where: {
        id: id
      }
    });
    res.json(ingresso);
  }
  catch (exception) {
    exceptionHandler(exception, res);
  }
});


// 

router.patch('/:id' , async (req, res) =>{
  try{
    const id = Number(req.params.id);
    const data = req.body;
    const ingresso = await prisma.ingresso.update({
      where: {
        id: id
      },
      data: data
    });
    res.json(ingresso);
  }
  catch(exception){
    exceptionHandler(exception, res)
  }
});

router.delete('/:id' , async (req, res) => {
  try{
    const id = Number(req.params.id);
    const ingresso = await prisma.ingresso.delete({
      where: {
        id: id
      }
    });
    res.status(204).end(); 
  }
  catch(exception){
    exceptionHandler(exception, res)
  }
});

//resposta padrao para rotas que nao existem 

router.all('*', (req, res) => {
  res.status(501).end();
})


module.exports = router;
